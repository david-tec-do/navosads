# ğŸ¤– NewsBreak Budget Tool - ä½¿ç”¨æŒ‡å—

## âœ… å·²å®Œæˆ

NewsBreak Budget Info LLM Tool å·²æˆåŠŸå®ç°å¹¶é›†æˆåˆ°èŠå¤©ç³»ç»Ÿä¸­ï¼

**Commit ID**: `e426190`

---

## ğŸ¯ åŠŸèƒ½è¯´æ˜

### AI ç°åœ¨å¯ä»¥ï¼š

1. **è‡ªåŠ¨æŸ¥è¯¢ NewsBreak é¢„ç®—**
   - ç”¨æˆ·é—®ï¼š"æˆ‘çš„ NewsBreak é¢„ç®—è¿˜å‰©å¤šå°‘ï¼Ÿ"
   - AI è‡ªåŠ¨è°ƒç”¨ tool è·å–å®æ—¶æ•°æ®
   - è¿”å›æ ¼å¼åŒ–çš„é¢„ç®—ä¿¡æ¯

2. **è¯»å–ç”¨æˆ·é…ç½®çš„ Token**
   - ä»æ•°æ®åº“å®‰å…¨è¯»å–
   - è‡ªåŠ¨è§£å¯†
   - ä»…ä½¿ç”¨ active çŠ¶æ€çš„è´¦æˆ·

3. **è°ƒç”¨ NewsBreak API**
   - ç«¯ç‚¹: `getAccountBudgetInfo`
   - è‡ªåŠ¨è®¤è¯
   - è¿”å›é¢„ç®—è¯¦æƒ…

---

## ğŸ“‹ ä½¿ç”¨å‰æ

ç”¨æˆ·éœ€è¦å…ˆé…ç½® NewsBreak Tokenï¼š

1. ç‚¹å‡»ç”¨æˆ·èœå• â†’ **"Ads Account Management"**
2. ç‚¹å‡» **"Add Account"**
3. é€‰æ‹©å¹³å°ï¼š**NewsBreak**
4. å¡«å†™ï¼š
   - Account Name: "ä¸»è´¦æˆ·"
   - Access Token: [ä½ çš„ NewsBreak API Token]
5. ä¿å­˜

---

## ğŸ’¬ å¯¹è¯ç¤ºä¾‹

### ç¤ºä¾‹ 1: æŸ¥è¯¢é¢„ç®—

**ç”¨æˆ·**: 
```
å¸®æˆ‘æŸ¥ä¸€ä¸‹ NewsBreak çš„å¹¿å‘Šé¢„ç®—
```

**AI è¡Œä¸º**:
1. âœ… è°ƒç”¨ `getNewsbreakBudget` tool
2. âœ… ä»æ•°æ®åº“è·å–ç”¨æˆ·çš„ NewsBreak Token
3. âœ… è°ƒç”¨ NewsBreak API
4. âœ… è¿”å›é¢„ç®—ä¿¡æ¯

**AI å“åº”ç¤ºä¾‹**:
```
æ‚¨çš„ NewsBreak ä¸»è´¦æˆ·é¢„ç®—æƒ…å†µå¦‚ä¸‹ï¼š

ğŸ“Š è´¦æˆ· 123456:
â€¢ å‰©ä½™é¢„ç®—: $800.00
â€¢ æ”¯å‡ºä¸Šé™: $1,000.00
â€¢ å·²ä½¿ç”¨: $200.00
â€¢ ä½¿ç”¨ç‡: 20%

æ‚¨è¿˜æœ‰å……è¶³çš„é¢„ç®—å¯ä»¥ç»§ç»­æŠ•æ”¾å¹¿å‘Šã€‚
```

---

### ç¤ºä¾‹ 2: æŸ¥è¯¢ç‰¹å®šè´¦æˆ·

**ç”¨æˆ·**: 
```
æŸ¥çœ‹è´¦æˆ· 123456 å’Œ 789012 çš„é¢„ç®—æƒ…å†µ
```

**AI è°ƒç”¨**:
```typescript
getNewsbreakBudget({
  accountIds: ["123456", "789012"]
})
```

---

### ç¤ºä¾‹ 3: æœªé…ç½® Token

**ç”¨æˆ·**: 
```
æˆ‘çš„ NewsBreak é¢„ç®—è¿˜æœ‰å¤šå°‘ï¼Ÿ
```

**AI å“åº”**:
```
æ‚¨è¿˜æ²¡æœ‰é…ç½® NewsBreak è´¦æˆ·ã€‚

è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è®¾ç½®ï¼š
1. ç‚¹å‡»å·¦ä¸‹è§’ç”¨æˆ·å¤´åƒ
2. é€‰æ‹© "Ads Account Management"
3. æ·»åŠ æ‚¨çš„ NewsBreak Access Token

è®¾ç½®å®Œæˆåï¼Œæˆ‘å°±å¯ä»¥ä¸ºæ‚¨æŸ¥è¯¢é¢„ç®—ä¿¡æ¯äº†ã€‚
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ–‡ä»¶ç»“æ„

```
lib/ai/tools/
â”œâ”€â”€ get-newsbreak-budget.ts    # NewsBreak Budget tool å®ç°
â””â”€â”€ README_NEWSBREAK.md        # Tool æ–‡æ¡£

app/(chat)/api/chat/route.ts
â”œâ”€â”€ å¯¼å…¥ getNewsbreakBudget
â”œâ”€â”€ æ³¨å†Œåˆ° tools å¯¹è±¡
â””â”€â”€ æ·»åŠ åˆ° experimental_activeTools
```

### æ•°æ®æµ

```
ç”¨æˆ·æé—®
    â†“
LLM å†³å®šè°ƒç”¨ tool
    â†“
getNewsbreakBudget æ‰§è¡Œ:
    â”œâ”€ ä» DB è·å–ç”¨æˆ·çš„ NewsBreak è´¦æˆ·
    â”œâ”€ è§£å¯† Access Token
    â”œâ”€ è°ƒç”¨ NewsBreak API
    â””â”€ è¿”å›é¢„ç®—æ•°æ®
    â†“
LLM æ ¼å¼åŒ–å“åº”
    â†“
è¿”å›ç»™ç”¨æˆ·
```

### API è°ƒç”¨è¯¦æƒ…

**è¯·æ±‚**:
```http
POST https://business.newsbreak.com/business-api/v1/balance/getAccountBudgetInfo
Content-Type: application/json
Access-Token: [ç”¨æˆ·çš„è§£å¯†Token]

{
  "accountIds": ["123", "456"]
}
```

**å“åº”**:
```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "accountId": "123",
        "accountRemaining": "800.0",
        "accountSpendingCap": "1000.0",
        "accountTotalSpend": "200.0",
        "canViewBudget": true
      }
    ]
  }
}
```

---

## ğŸ” å®‰å…¨è€ƒè™‘

### Token å®‰å…¨
- âœ… Token å­˜å‚¨æ—¶ä½¿ç”¨ AES-256-GCM åŠ å¯†
- âœ… åªåœ¨éœ€è¦æ—¶è§£å¯†
- âœ… è§£å¯†åçš„ Token ä¸ä¼šå‘é€åˆ°å‰ç«¯
- âœ… ä»…åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œ

### è®¿é—®æ§åˆ¶
- âœ… éªŒè¯ç”¨æˆ· session
- âœ… åªèƒ½è®¿é—®è‡ªå·±çš„ Token
- âœ… æ£€æŸ¥è´¦æˆ·çŠ¶æ€ï¼ˆactiveï¼‰
- âœ… è®°å½•æœ€åä½¿ç”¨æ—¶é—´

### é”™è¯¯å¤„ç†
- âœ… å‹å¥½çš„é”™è¯¯æç¤º
- âœ… å¼•å¯¼ç”¨æˆ·å®Œæˆè®¾ç½®
- âœ… è®°å½•é”™è¯¯æ—¥å¿—
- âœ… ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. å‡†å¤‡å·¥ä½œ
```bash
# 1. ç¡®ä¿æ•°æ®åº“è¿ç§»å·²å®Œæˆ
# 2. åœ¨ .env.local è®¾ç½® ADS_TOKEN_ENCRYPTION_KEY
# 3. é…ç½® NewsBreak Token
```

### 2. æ·»åŠ æµ‹è¯•è´¦æˆ·
1. è®¿é—® `/settings/ads-accounts`
2. æ·»åŠ  NewsBreak è´¦æˆ·
3. è¾“å…¥çœŸå®çš„ Access Token

### 3. æµ‹è¯•å¯¹è¯
åœ¨èŠå¤©ä¸­è¾“å…¥ï¼š
```
å¸®æˆ‘æŸ¥ä¸€ä¸‹ NewsBreak çš„é¢„ç®—
```

### 4. éªŒè¯å“åº”
- âœ… AI è‡ªåŠ¨è°ƒç”¨ tool
- âœ… è¿”å›é¢„ç®—ä¿¡æ¯
- âœ… æ•°æ®æ ¼å¼æ­£ç¡®

---

## ğŸ“Š è¿”å›æ•°æ®æ ¼å¼

LLM ä¼šæ”¶åˆ°ä»¥ä¸‹æ ¼å¼çš„æ•°æ®ï¼š

```typescript
{
  success: true,
  accountName: "ä¸»è´¦æˆ·",
  budgetInfo: [
    {
      accountId: "123456",
      accountRemaining: "800.0",
      accountSpendingCap: "1000.0", 
      accountTotalSpend: "200.0",
      canViewBudget: true
    }
  ],
  summary: {
    totalAccounts: 1,
    accountsWithAccess: 1
  }
}
```

LLM å¯ä»¥åŸºäºè¿™äº›æ•°æ®ï¼š
- è®¡ç®—ä½¿ç”¨ç‡
- æä¾›é¢„ç®—å»ºè®®
- è­¦å‘Šé¢„ç®—ä¸è¶³
- æ¯”è¾ƒå¤šä¸ªè´¦æˆ·

---

## ğŸš€ æ‰©å±•å»ºè®®

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] æ·»åŠ é¢„ç®—ä¸è¶³è­¦å‘Šï¼ˆä½äº10%æ—¶æé†’ï¼‰
- [ ] æ”¯æŒç”¨æˆ·é€‰æ‹©ä½¿ç”¨å“ªä¸ªé…ç½®çš„è´¦æˆ·
- [ ] ç¼“å­˜é¢„ç®—æ•°æ®ï¼ˆé¿å…é¢‘ç¹è°ƒç”¨APIï¼‰

### ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰
- [ ] æ·»åŠ æ›´å¤š NewsBreak API tools
  - è·å–å¹¿å‘Šç³»åˆ—åˆ—è¡¨
  - æŸ¥çœ‹å¹¿å‘Šè¡¨ç°
  - æ›´æ–°å¹¿å‘Šé¢„ç®—
- [ ] æ”¯æŒå…¶ä»–å¹¿å‘Šå¹³å°ï¼ˆGoogle Adsã€Facebook Adsï¼‰

### é•¿æœŸï¼ˆ3ä¸ªæœˆï¼‰
- [ ] è‡ªåŠ¨é¢„ç®—ä¼˜åŒ–å»ºè®®
- [ ] è·¨å¹³å°é¢„ç®—å¯¹æ¯”
- [ ] é¢„ç®—è¶‹åŠ¿åˆ†æ

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [NewsBreak API æ–‡æ¡£](https://business.newsbreak.com/business-api-doc/docs/api-reference/balance/get-account-budget-info)
- [Vercel AI SDK - Tools](https://sdk.vercel.ai/docs/ai-sdk-core/tools-and-tool-calling)

---

**ğŸ‰ ç°åœ¨ AI å¯ä»¥å¸®ä½ ç®¡ç† NewsBreak å¹¿å‘Šé¢„ç®—äº†ï¼**

